<article>
  <div>
    <h3><%= recipe.name.capitalize %></h3>
    <%= link_to('Details', recipe_path(recipe)) %>
    <% if public %>
      <span>by: <%= recipe.user.name.capitalize %></span>
    <% else %>
      <%= link_to('Delete', recipe_path(recipe), data: { turbo_method: :delete, turbo_confirm: 'Are you sure?' }) if can?(:destroy, recipe) %>
    <% end %>
  </div>
  <div>
    <% if public %>
      <span>Total food items: <%= recipe.recipe_foods.length %></span>
      <span>Total price: $<%= recipe.recipe_foods.reduce(0) { |total, item| total + item.price } %></span>
    <% else %>
      <p><%= recipe.description %></p>
    <% end %>
  </div>
</article>